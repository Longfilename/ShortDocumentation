mixin renderView (path)
  div.component-view
    div.component-view__loading
      p.component-view__loading-text loading component
    div.component-view__loaded
      iframe.component-view__iframe(data-src=path, scrolling="no")

mixin renderCode (view)
  div.tabs
    div.tabs__nav
      - if (view.htmlContent) {
        a.tabs__nav-link
          i.fa.fa-html5
          |  HTML
      - }
      
      - if (view.json) {
        a.tabs__nav-link
          i.fa.fa-code
          |  JSON
      - }
    
      - view.ts && view.ts.map((ts) => {
        a.tabs__nav-link
          i.fa.fa-bolt
          - if (view.ts.length > 1) {
            |  #{ ts }
          - } else {
            |  TypeScript
          - }
      - })
    
      - view.scss && view.scss.map((scss) => {
        a.tabs__nav-link
          i.fa.fa-css3
          - if (view.scss.length > 1) {
            |  #{ scss }
          - } else {
            |  SCSS
          - }
      - })
    
    div.tabs__content
      - if (view.htmlContent) {
        div.tabs__content-tab
          pre.language-html
            code.language-html!=view.htmlContent
      - }
      
      - if (view.json) {
        div.tabs__content-tab
          pre.language-json
            code.language-json!=view.jsonContent
      - }
    
      - view.ts && view.ts.map((ts, index) => {
        div.tabs__content-tab
          pre.language-typescript
            code.language-typescript!=view.tsContent[index]
      - })
    
      - view.scss && view.scss.map((scss, index) => {
        div.tabs__content-tab
          pre.language-scss
            code.language-scss!=view.scssContent[index]
      - })

doctype html
html(lang="en")
  head
    - var title = '/src/components/' + folder
    include ./_head

  body
    include ./components/page/page
      article.card
        div.card__content.card__content--rich-text
          !=markdown

      - if (views.length > 1) {
        div.component-nav
          - views.map((view, index) => {
            a.button(class=index === 0 ? 'button--selected' : '') Show #{ view.title } Component
            - if (index < views.length - 1) {
              |  &nbsp;  
            - }
          - })
      - }
      
      - views.map((view, index) => {
        div.component(class=index === 0 ? 'component--selected' : '')
          - if (size && size.indexOf('px')) {
            div(style=`width: ${size};`)
              +renderView(view.html)

            div.card
              div.card__content
                +renderCode(view)
          
          - } else {
            div
              +renderView(view.html)
              
              div.resizer.resizer--view-component
                a.resizer-link.resizer-link--375(data-resizer="375px")
                a.resizer-link.resizer-link--768(data-resizer="768px")
                a.resizer-link.resizer-link--1024(data-resizer="1024px")
                a.resizer-link.resizer-link--100.resizer-link--active(data-resizer="100%")

            div.card
              div.card__content
                +renderCode(view)
          - }
      - })
    
    include ./_foot
